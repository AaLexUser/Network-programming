# 38. Certificate Transparency

```{glossary}
Certificate Transparency (CT)
    это механизм, разработанный Google (при участии ряда других компаний и сообществ), для повышения прозрачности и надёжности в системе цифровых сертификатов. Главная цель — упростить выявление фальшивых или по ошибке (либо злоумышленно) выданных сертификатов.
```

## Проблема, которую решает CT

Традиционно все браузеры доверяют множеству корневых центров сертификации (CA). Если какой-либо CA будет скомпрометирован или недобросовестен, он может выдать поддельный сертификат для любого домена. Владельцы доменов и пользователи практически не имеют инструментов, позволяющих своевременно обнаружить и отозвать такой сертификат.

**Certificate Transparency** призван устранить эту проблему, предоставляя механизмы для:

1. Прозрачной записи всех выданных SSL/TLS-сертификатов в «публичные» лог-серверы (CT logs).
2. Возможности для любых заинтересованных сторон — браузеров, владельцев доменов, исследователей, пользователей — просматривать эти логи и отслеживать, какие сертификаты были выданы для конкретных доменов.

## Как это работает

1. **Лог-серверы (Certiﬁcate logs)**
  - Являются публично доступными.
  - Сохраняют информацию о каждом выданном сертификате или о предсертификате.
  - Построены на основе Merkle-деревьев, что позволяет подтверждать неизменность и целостность записей.
2. **Владельцы домена**
  - Могут настроить мониторинг **(Certiﬁcate monitors)** (через специализированные сервисы или самостоятельно), отслеживая появление «подозрительных» сертификатов для своего домена.
  - Если появляется несанкционированный сертификат, они могут оперативно сообщить в CA, в браузерные вендоры и т. д.
3. **Браузеры (или другие клиенты) (Certiﬁcate auditors)**
  - Запрашивают у сервера не только сертификат, но и SCT (Signed Certificate Timestamp) — криптографическое подтверждение того, что сертификат (или предсертификат) был зафиксирован в одном из публичных логов.
  - При отсутствии валидного SCT браузер может отобразить предупреждение или заблокировать соединение (в зависимости от политики).
4. **SCT (Signed Certificate Timestamp)**
  - Короткий «чек» (ticket), который означает: «Вот доказательство, что сертификат был отправлен на публикацию в CT-лог и будет отображён публично».
  - Помогает браузеру убедиться, что сертификат прозрачно зарегистрирован, а не выдан «подпольно».

```{figure} ../images/04_lecture_http_https/page-65.png
:name:ct
Certificate Transparency {cite}`доронин2023-4`
```

```{bibliography}
:filter: docname in docnames
:style: unsrt
```
