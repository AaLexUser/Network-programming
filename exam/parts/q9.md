# 9. Как передаются данные в сети Internet

```{figure} ../images/aliev-internet.png
:name: aliev-internet

Архитектура сети Интернет {cite}`алиев2024сети2`
```

```{figure} ../images/IP_stack_connections.drawio.png
:name: IP_stack_connections

Conceptual data flow in a simple network topology of two hosts {cite}`Wiki2025Jan`
```

### Уровни передачи данных

1. **Прикладной уровень (Application Layer):**
   - **Приложения** на каждом хосте (например, веб-браузер на Хосте A и веб-сервер на Хосте B) взаимодействуют друг с другом, как если бы они были непосредственно соединены.
   - Операции чтения и записи выполняются приложениями через такие протоколы, как HTTP, без необходимости знать детали нижележащих уровней.
   - Пример: Веб-браузер отправляет HTTP-запрос к веб-серверу, используя адрес и идентификаторы сеанса (например, cookie).

2. **Транспортный уровень (Transport Layer):**
   - Обеспечивает **процесс-к-процесс** коммуникацию между приложениями на разных хостах.
   - Каждый процесс идентифицируется с помощью **портов** (например, порт 80 для HTTP).
   - Протоколы, такие как TCP или UDP, управляют установкой соединения, контролем потока и надежностью передачи данных.
   - Приложения не видят структуру данных или маршрутизацию; они оперируют только с потоками байтов.

3. **Сетевой уровень (Internetworking Layer / Network Layer):**
   - Использует **Интернет-протокол (IP)** для передачи пакетов данных через различные сети.
   - Каждый пакет содержит исходный и конечный IP-адреса, позволяя маршрутизаторам направлять его к правильному месту назначения.
   - Маршрутизаторы принимают решения о пересылке пакетов на основе таблиц маршрутизации и текущего состояния сети.

4. **Канальный и физический уровни (Data Link и Physical Layers):**
   - Обеспечивают передачу **битов данных** по физическим носителям (например, оптоволоконным кабелям, витой паре или беспроводным соединениям).
   - Обрабатывают такие задачи, как формирование кадров, обнаружение ошибок и управление доступом к среде передачи.

### Процесс передачи данных

1. **Инициация соединения:**
   - Приложение на Хосте A инициирует соединение с приложением на Хосте B, используя соответствующий порт и протокол (например, HTTP на порту 80).

2. **Разбиение данных:**
   - Данные приложения разбиваются на сегменты транспортного уровня, которые затем инкапсулируются в IP-пакеты на сетевом уровне.

3. **Маршрутизация:**
   - IP-пакеты передаются через сеть, проходя через маршрутизаторы, которые определяют оптимальный путь к конечному IP-адресу Хоста B.

4. **Доставка и сборка:**
   - На каждом промежуточном узле (маршрутизаторе) пакет передается дальше по сети до достижения Хоста B.
   - Транспортный уровень на Хосте B собирает сегменты обратно в исходные данные приложения.

5. **Обратная связь:**
   - При необходимости, Хост B может отправить ответы или подтверждения обратно к Хосту A, следуя тому же многоуровневому процессу.

```{bibliography}
:style: unsrt
:filter: docname in docnames
```